{% extends 'core/base.html' %}

{% load static %}

{% block title %}Historial Compra{% endblock %}

{% block content %}
<section class="page-section cta">
    <div class="container">
        <div class="row">
            <div class="col-xl-12">
                <form action="/guardarEdicion/" onsubmit="return validateForm()" method="POST">
                    {% csrf_token %}
                    <div class="form-group">
                        <label for="formGroupExampleInput">Rut Cliente</label>
                        <input type="text" class="form-control" id="txtRut" name="txtRut" value="{{client.rut}}"
                            readonly required>
                    </div>
                    <div class="form-group">
                        <label for="formGroupExampleInput2">Nombre Cliente</label>
                        <input type="text" class="form-control" id="txtNombre" name="txtNombre"
                            value="{{client.nombre}}">
                    </div>
                    <div class="form-group">
                        <label for="formGroupExampleInput2">Dirección</label>
                        <input type="text" class="form-control" id="txtDireccion" name="txtDireccion"
                            value="{{client.direccion}}">
                    </div>
                    <div class="form-group">
                        <label for="formGroupExampleInput2">Email</label>
                        <input type="text" class="form-control" id="txtEmail" name="txtEmail" value="{{client.email}}">
                    </div>
                    <div class="form-group">
                        <label for="formGroupExampleInput2">Número de telefono</label>
                        <input type="text" class="form-control" id="txtNumero" name="txtNumero"
                            value="{{client.Numero}}" required>
                    </div>
                    <button type="submit" class="btn btn-secondary btn-lg btn-block">Guardar</button>
                </form>
            </div>
        </div>
    </div>
</section>
<script>
    function validateForm() {
        if (document.getElementById("txtRut").value.trim() === "") {
            alert("El campo Rut es obligatorio.");
            return false;
        }

        if (document.getElementById("txtNombre").value.trim() === "") {
            alert("El campo Nombre Cliente es obligatorio.");
            return false;
        }

        if (document.getElementById("txtDireccion").value.trim() === "") {
            alert("El campo Dirección es obligatorio.");
            return false;
        }

        if (document.getElementById("txtEmail").value.trim() === "") {
            alert("El campo Email es obligatorio.");
            return false;
        }

        var emailRegex = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        if (!emailRegex.test(document.getElementById("txtEmail").value)) {
            alert("El campo Email no es válido.");
            return false;
        }

        var numero = document.getElementById("txtNumero").value.trim();
        var telefonoRegex = /^[0-9]+$/; 
        if (numero === "") {
            alert("El campo Número de teléfono es obligatorio.");
            return false;
        } else if (!telefonoRegex.test(numero)) {
            alert("El número de teléfono solo puede contener dígitos.");
            return false;
        }


        return true;
    }
</script>

{% endblock %}